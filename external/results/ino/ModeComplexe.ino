// Code generated by ArduinoML
// Structural concepts
void setup() {
	pinMode(1, INPUT);
	pinMode(12, OUTPUT);
}

//Behavioral concepts
long time=0; long debounce = 200;

void mode_jour() {
	//setup bricks
	pinMode(9, INPUT);
	pinMode(10, OUTPUT);
	//initial state
	state_jour_off();
}

void reset_jour() {
	digitalWrite(10, LOW);
}

void jour_to_nuit(){
	boolean guard = millis() - time > debounce;
	if( analogRead(1) < 500 && guard ) {
		reset_jour();
		time = millis();
		mode_nuit();
	}
}
void state_jour_off() {
	digitalWrite(10, LOW);
	digitalWrite(12, LOW);
	boolean guard = millis() - time > debounce;
	jour_to_nuit();
	if( digitalRead(9) == HIGH && guard ) {
		time = millis();
		state_jour_on();
	}
	else {
		state_jour_off(); 
	}
}

void state_jour_on() {
	digitalWrite(10, HIGH);
	boolean guard = millis() - time > debounce;
	jour_to_nuit();
	if( digitalRead(9) == HIGH && guard ) {
		time = millis();
		state_jour_off();
	}
	else {
		state_jour_on(); 
	}
}

void mode_nuit() {
	//setup bricks
	pinMode(9, INPUT);
	pinMode(11, OUTPUT);
	//initial state
	state_nuit_off();
}

void reset_nuit() {
	digitalWrite(11, LOW);
}

void nuit_to_jour(){
	boolean guard = millis() - time > debounce;
	if( analogRead(1) >= 500 && guard ) {
		reset_nuit();
		time = millis();
		mode_jour();
	}
}
void state_nuit_off() {
	digitalWrite(11, LOW);
	digitalWrite(12, HIGH);
	boolean guard = millis() - time > debounce;
	nuit_to_jour();
	if( digitalRead(9) == HIGH && guard ) {
		time = millis();
		state_nuit_on();
	}
	else {
		state_nuit_off(); 
	}
}

void state_nuit_on() {
	digitalWrite(11, HIGH);
	boolean guard = millis() - time > debounce;
	nuit_to_jour();
	if( digitalRead(9) == HIGH && guard ) {
		time = millis();
		state_nuit_off();
	}
	else {
		state_nuit_on(); 
	}
}

void loop() {mode_jour();} // Entering init mode